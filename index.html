<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Run Avec le Smile ‚Äî Emmanuel Leblond</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Barlow+Condensed:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:       #080c10;
    --surface:  #0d1318;
    --card:     #111820;
    --border:   #1c2730;
    --blue:     #5bc8f5;
    --blue-dim: #2a6a8a;
    --blue-glow:#5bc8f530;
    --text:     #e8f4f8;
    --muted:    #5a7a8a;
    --white:    #ffffff;
  }

  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    font-weight: 300;
    overflow-x: hidden;
    cursor: default;
  }

  /* ‚îÄ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ‚îÄ */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--blue-dim); border-radius: 2px; }

  /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    display: flex;
    flex-direction: column;
    padding: 0 48px;
    background: linear-gradient(to bottom, rgba(8,12,16,0.97) 80%, transparent);
  }

  .nav-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 0 10px;
    border-bottom: 1px solid rgba(28,39,48,0.7);
  }

  .nav-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0 10px;
  }

  .nav-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.35rem;
    letter-spacing: 0.12em;
    color: var(--blue);
    text-decoration: none;
  }

  .nav-links {
    display: flex;
    gap: 40px;
    list-style: none;
    flex: 1;
    justify-content: center;
  }

  .nav-links a {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.82rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    text-decoration: none;
    transition: color 0.2s;
    position: relative;
    padding-bottom: 2px;
  }

  .nav-links a::after {
    content: '';
    position: absolute;
    bottom: -2px; left: 0; right: 0;
    height: 1px;
    background: var(--blue);
    transform: scaleX(0);
    transition: transform 0.2s;
  }

  .nav-links a:hover { color: var(--blue); }
  .nav-links a:hover::after { transform: scaleX(1); }

  /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
  .hero {
    position: relative;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 0 48px;
    overflow: hidden;
  }

  /* animated track lines background */
  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 120px,
        rgba(91,200,245,0.03) 120px,
        rgba(91,200,245,0.03) 121px
      ),
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 80px,
        rgba(91,200,245,0.02) 80px,
        rgba(91,200,245,0.02) 81px
      );
    pointer-events: none;
  }

  /* horizon glow */
  .hero::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 40%;
    background: linear-gradient(to top, rgba(91,200,245,0.06), transparent);
    pointer-events: none;
  }



  /* hero background image */
  .hero-decoration {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 52%;
    pointer-events: none;
    overflow: visible;
  }

  .hero-decoration img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
    opacity: 0.55;
    animation: breathe 6s ease-in-out infinite;
    filter: grayscale(20%);
  }

  /* fade left edge only so image blends into dark bg without washing itself out */
  .hero-decoration::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      linear-gradient(to right, var(--bg) 0%, rgba(8,12,16,0.3) 35%, transparent 65%),
      linear-gradient(to bottom, var(--bg) 0%, transparent 12%, transparent 88%, var(--bg) 100%);
    pointer-events: none;
  }

  @keyframes breathe {
    0%,100% { opacity: 0.55; transform: scale(1); }
    50%      { opacity: 0.65; transform: scale(1.02); }
  }

  @media (max-width: 640px) {
    .hero-decoration { width: 100%; opacity: 0.4; }
    .hero-decoration img { opacity: 0.35; }
  }

  .hero-content {
    position: relative;
    z-index: 2;
    max-width: 900px;
    animation: heroIn 1s ease both;
  }

  @keyframes heroIn {
    from { opacity:0; transform: translateY(30px); }
    to   { opacity:1; transform: translateY(0); }
  }

  .hero-eyebrow {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
    animation: heroIn 1s 0.1s ease both;
  }

  .hero-eyebrow .line {
    width: 40px;
    height: 1px;
    background: var(--blue);
  }

  .hero-eyebrow span {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--blue);
  }

  .hero-account {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(4.5rem, 14vw, 10rem);
    line-height: 0.92;
    letter-spacing: 0.04em;
    color: var(--white);
    animation: heroIn 1s 0.15s ease both;
  }

  .hero-account .accent { color: var(--blue); }

  .hero-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: clamp(1.1rem, 2.5vw, 1.6rem);
    font-weight: 300;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--muted);
    margin-top: 12px;
    animation: heroIn 1s 0.25s ease both;
  }

  .hero-tagline {
    margin-top: 28px;
    font-size: clamp(1rem, 1.8vw, 1.25rem);
    font-weight: 300;
    font-style: italic;
    color: var(--text);
    max-width: 520px;
    line-height: 1.6;
    opacity: 0.85;
    animation: heroIn 1s 0.35s ease both;
  }

  .hero-cta {
    display: flex;
    gap: 16px;
    margin-top: 44px;
    flex-wrap: wrap;
    animation: heroIn 1s 0.45s ease both;
  }

  .btn-primary {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    text-decoration: none;
    padding: 14px 32px;
    background: var(--blue);
    color: #000;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .btn-primary:hover {
    background: #fff;
    box-shadow: 0 0 30px var(--blue-glow);
  }

  .btn-ghost {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    text-decoration: none;
    padding: 13px 32px;
    background: transparent;
    color: var(--blue);
    font-weight: 600;
    border: 1px solid var(--blue-dim);
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-ghost:hover {
    border-color: var(--blue);
    background: var(--blue-glow);
  }

  .hero-scroll {
    position: absolute;
    bottom: 36px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    animation: heroIn 1.2s 0.8s ease both;
  }

  .hero-scroll span {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .scroll-line {
    width: 1px;
    height: 40px;
    background: linear-gradient(to bottom, var(--blue), transparent);
    animation: scrollPulse 2s ease-in-out infinite;
  }

  @keyframes scrollPulse {
    0%,100% { opacity: 0.4; transform: scaleY(1); }
    50%      { opacity: 1;   transform: scaleY(1.2); }
  }

  /* ‚îÄ‚îÄ‚îÄ SECTIONS SHARED ‚îÄ‚îÄ‚îÄ */
  section {
    padding: 100px 48px;
    position: relative;
  }

  .section-label {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 48px;
  }

  .section-label .line {
    width: 30px;
    height: 1px;
    background: var(--blue);
  }

  .section-label span {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--blue);
  }

  .section-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(2.5rem, 5vw, 4rem);
    letter-spacing: 0.05em;
    line-height: 1;
    color: var(--white);
    margin-bottom: 20px;
  }

  .section-sub {
    font-size: 1rem;
    color: var(--muted);
    max-width: 480px;
    line-height: 1.7;
  }

  /* ‚îÄ‚îÄ‚îÄ DIVIDER ‚îÄ‚îÄ‚îÄ */
  .divider {
    width: 100%;
    height: 1px;
    background: linear-gradient(to right, transparent, var(--border), var(--blue-dim), var(--border), transparent);
    margin: 0 48px;
    width: calc(100% - 96px);
  }

  /* ‚îÄ‚îÄ‚îÄ COUNTDOWN ‚îÄ‚îÄ‚îÄ */
  #countdown {
    background: var(--surface);
  }

  .countdown-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .countdown-race-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--blue);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .countdown-race-name::before,
  .countdown-race-name::after {
    content: '';
    display: block;
    width: 20px;
    height: 1px;
    background: var(--blue-dim);
  }

  .countdown-grid {
    display: flex;
    gap: 4px;
    align-items: flex-start;
    margin: 32px 0;
    flex-wrap: wrap;
    justify-content: center;
  }

  .countdown-unit {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
  }

  .countdown-number {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(4rem, 12vw, 9rem);
    line-height: 1;
    color: var(--white);
    min-width: 2ch;
    text-align: center;
    position: relative;
    transition: all 0.3s;
  }

  .countdown-number.updated {
    color: var(--blue);
    text-shadow: 0 0 30px var(--blue);
  }

  .countdown-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    margin-top: 4px;
  }

  .countdown-sep {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(4rem, 12vw, 9rem);
    line-height: 1;
    color: var(--blue-dim);
    margin: 0 4px;
    opacity: 0.6;
    animation: blink 1s step-end infinite;
  }

  @keyframes blink {
    0%,100% { opacity: 0.6; }
    50%      { opacity: 0.15; }
  }

  .countdown-date-line {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .countdown-date-line strong { color: var(--text); font-weight: 400; }

  /* ‚îÄ‚îÄ‚îÄ MILEAGE / STRAVA ‚îÄ‚îÄ‚îÄ */
  #mileage {
    background: var(--bg);
  }

  .mileage-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  @media (max-width: 768px) {
    .mileage-layout { grid-template-columns: 1fr; }
  }

  .mileage-card {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 32px;
    position: relative;
    overflow: visible;
  }

  .mileage-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(to right, var(--blue), transparent);
  }

  .mileage-big {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(4rem, 8vw, 6rem);
    line-height: 1;
    color: var(--white);
    margin: 16px 0 8px;
  }

  .mileage-big span {
    font-size: 0.4em;
    color: var(--blue);
    letter-spacing: 0.1em;
    vertical-align: middle;
  }

  .mileage-sub-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .mileage-bar-wrap {
    margin-top: 24px;
  }

  .mileage-bar-label {
    display: flex;
    justify-content: space-between;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .mileage-bar-label span:last-child { color: var(--blue); }

  .bar-track {
    height: 4px;
    background: var(--border);
    border-radius: 2px;
    overflow: hidden;
  }

  .bar-fill {
    height: 100%;
    background: linear-gradient(to right, var(--blue-dim), var(--blue));
    border-radius: 2px;
    transition: width 1.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .weekly-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
    margin-top: 12px;
  }

  .week-bar {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    position: relative;
  }

  .week-fill-wrap {
    width: 100%;
    height: 60px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-end;
    background: rgba(255,255,255,0.02);
    border-radius: 2px;
    overflow: visible;
    position: relative;
    cursor: pointer;
  }

  .week-stack {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    width: 100%;
    gap: 1px;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    transition: all 0.3s;
  }

  .week-fill {
    width: 100%;
    background: var(--blue-dim);
    transition: height 1s ease, background 0.2s;
    min-height: 0;
  }

  .week-fill:first-child { border-radius: 2px 2px 0 0; }
  .week-fill:only-child  { border-radius: 2px 2px 0 0; }

  .week-fill.run2 {
    background: rgba(91,200,245,0.45);
    border-top: 1px dashed rgba(91,200,245,0.4);
  }

  .week-fill.current { background: var(--blue); }
  .week-fill.current.run2 { background: rgba(91,200,245,0.6); }

  .week-bar.future .week-fill-wrap {
    background: rgba(255,255,255,0.01);
    border: 1px dashed rgba(255,255,255,0.04);
  }

  .week-day-label.today {
    color: var(--blue);
    font-weight: 600;
  }

  .week-bar:hover .week-fill { background: var(--blue); }
  .week-bar:hover .week-fill.run2 { background: rgba(91,200,245,0.7); }

  /* Tooltip */
  .week-tooltip {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: #1a2a34;
    border: 1px solid var(--blue-dim);
    border-radius: 3px;
    padding: 6px 10px;
    white-space: nowrap;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.05em;
    color: var(--text);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
    z-index: 20;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }

  .week-tooltip::after {
    content: '';
    position: absolute;
    top: 100%; left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: var(--blue-dim);
  }

  .week-tooltip .tt-run {
    display: block;
    color: var(--blue);
    font-weight: 600;
  }

  .week-tooltip .tt-run + .tt-run {
    margin-top: 3px;
    padding-top: 3px;
    border-top: 1px solid var(--border);
  }

  .week-tooltip .tt-total {
    display: block;
    color: var(--muted);
    font-size: 0.65rem;
    margin-top: 3px;
    padding-top: 3px;
    border-top: 1px solid var(--border);
  }

  .week-bar:hover .week-tooltip { opacity: 1; }

  .week-day-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.58rem;
    letter-spacing: 0.08em;
    color: var(--muted);
    text-transform: uppercase;
  }

  .strava-connect-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin-top: 24px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.78rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: #fff;
    background: #fc4c02;
    border: 1px solid #fc4c02;
    padding: 11px 22px;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    font-weight: 600;
    clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));
  }

  .strava-connect-btn:hover {
    background: #e04400;
    border-color: #e04400;
    box-shadow: 0 4px 20px rgba(252,76,2,0.35);
  }

  .strava-status {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 14px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .strava-dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: var(--muted);
    flex-shrink: 0;
  }

  .strava-dot.live { background: #4caf50; box-shadow: 0 0 6px #4caf50; animation: pulse-dot 2s ease-in-out infinite; }

  @keyframes pulse-dot {
    0%,100% { opacity: 1; }
    50%      { opacity: 0.4; }
  }

  .strava-status-text { color: var(--muted); }
  .strava-status-text.live { color: #4caf50; }

  .coros-note {
    font-size: 0.78rem;
    color: var(--muted);
    margin-top: 12px;
    line-height: 1.5;
    font-style: italic;
  }

  /* ‚îÄ‚îÄ‚îÄ RACES ‚îÄ‚îÄ‚îÄ */
  #races {
    background: var(--surface);
  }

  .race-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 40px;
  }

  .race-table thead tr {
    border-bottom: 1px solid var(--border);
  }

  .race-table th {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.68rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    padding: 0 0 16px;
    text-align: left;
    font-weight: 400;
  }

  .race-table th:last-child { text-align: right; }

  .race-row {
    border-bottom: 1px solid var(--border);
    transition: background 0.2s;
  }

  .race-row:hover { background: rgba(91,200,245,0.03); }

  .race-row td {
    padding: 22px 0;
    vertical-align: middle;
  }

  .race-date {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.1rem;
    color: var(--blue);
    letter-spacing: 0.08em;
    min-width: 80px;
    padding-right: 24px !important;
  }

  .race-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: 0.04em;
    color: var(--white);
  }

  .race-location {
    font-size: 0.8rem;
    color: var(--muted);
    margin-top: 3px;
  }

  .race-type {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 1px;
    white-space: nowrap;
  }

  .type-xc {
    background: rgba(91,200,245,0.1);
    color: var(--blue);
    border: 1px solid rgba(91,200,245,0.2);
  }

  .type-track {
    background: rgba(255,200,80,0.08);
    color: #f5c842;
    border: 1px solid rgba(255,200,80,0.15);
  }

  .type-road {
    background: rgba(120,200,120,0.08);
    color: #80c880;
    border: 1px solid rgba(120,200,120,0.15);
  }

  .race-links {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    flex-wrap: wrap;
  }

  .race-link {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.68rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
    text-decoration: none;
    border: 1px solid var(--border);
    padding: 5px 10px;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .race-link:hover {
    color: var(--blue);
    border-color: var(--blue-dim);
  }

  .race-link.highlight {
    color: var(--blue);
    border-color: var(--blue-dim);
  }

  /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
  footer {
    padding: 48px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: gap;
    gap: 20px;
  }

  .footer-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.6rem;
    letter-spacing: 0.1em;
    color: var(--blue);
  }

  .footer-social {
    display: flex;
    gap: 20px;
    align-items: center;
  }

  .footer-social a { color: var(--muted); text-decoration: none; transition: color 0.2s; }
  .footer-social a:hover { color: var(--blue); }

  .footer-sponsor-btn {
    font-family: 'Barlow Condensed', sans-serif !important;
    font-size: 0.72rem !important;
    letter-spacing: 0.15em !important;
    text-transform: uppercase !important;
    color: var(--blue) !important;
    border: 1px solid var(--blue-dim) !important;
    padding: 6px 14px !important;
    transition: all 0.2s !important;
  }

  .footer-sponsor-btn:hover {
    background: var(--blue-glow) !important;
    border-color: var(--blue) !important;
    color: var(--blue) !important;
  }

  .footer-copy {
    font-size: 0.78rem;
    color: var(--muted);
  }

  /* ‚îÄ‚îÄ‚îÄ TABLET (max 900px) ‚îÄ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    nav { padding: 0 28px; }
    section { padding: 80px 28px; }
    .hero { padding: 0 28px; }
    .divider { margin: 0 28px; width: calc(100% - 56px); }
    .mileage-layout { grid-template-columns: 1fr; }
    .instagram-layout { grid-template-columns: 1fr; gap: 40px; }
    .race-table th:nth-child(3),
    .race-table td:nth-child(3) { display: none; }
  }

  /* ‚îÄ‚îÄ‚îÄ MOBILE (max 640px) ‚îÄ‚îÄ‚îÄ */
  @media (max-width: 640px) {

    /* NAV */
    nav { padding: 0 16px; }
    .nav-top { padding: 12px 0 8px; }
    .nav-bottom { padding: 6px 0 8px; }
    .nav-logo { font-size: 1.1rem; }
    .nav-links { gap: 18px; justify-content: flex-start; }
    .nav-links a { font-size: 0.72rem; }
    .lang-toggle { gap: 7px; }
    .lang-flag { font-size: 1rem; }

    /* HERO */
    .hero { padding: 0 16px; min-height: 100svh; justify-content: flex-end; padding-bottom: 80px; }
    .hero-decoration { width: 100%; opacity: 0.8; }
    .hero-decoration img { opacity: 0.10; }
    .hero-eyebrow { margin-bottom: 16px; }
    .hero-title { font-size: clamp(3.2rem, 18vw, 5rem); }
    .hero-tagline { font-size: 0.95rem; max-width: 100%; margin-bottom: 28px; }
    .hero-cta { flex-direction: column; gap: 12px; align-items: flex-start; }
    .btn-primary, .btn-ghost { width: 100%; text-align: center; justify-content: center; padding: 14px 24px; font-size: 0.8rem; }
    .hero-scroll { display: none; }

    /* SECTIONS */
    section { padding: 64px 16px; }
    .section-title { font-size: clamp(2.4rem, 11vw, 3.5rem); }
    .section-sub { font-size: 0.9rem; }
    .divider { margin: 0 16px; width: calc(100% - 32px); }

    /* COUNTDOWN */
    .countdown-grid { gap: 2px; margin: 20px 0; }
    .countdown-number { font-size: clamp(3.2rem, 16vw, 5rem); min-width: 1.8ch; }
    .countdown-sep { font-size: clamp(3.2rem, 16vw, 5rem); margin: 0 1px; }
    .countdown-label { font-size: 0.55rem; letter-spacing: 0.12em; }
    .countdown-date-line { font-size: 0.7rem; text-align: center; }
    .countdown-race-name { font-size: 0.7rem; }

    /* MILEAGE */
    .mileage-card { padding: 20px; }
    .mileage-big { font-size: clamp(3rem, 14vw, 5rem); }
    .strava-connect-btn { width: 100%; justify-content: center; }
    .weekly-grid { gap: 3px; }
    .week-fill-wrap { height: 50px; }
    /* On mobile, show tooltip on tap instead of hover */
    .week-tooltip {
      bottom: calc(100% + 6px);
      font-size: 0.68rem;
      padding: 5px 8px;
    }
    .week-bar.tapped .week-tooltip { opacity: 1; }

    /* RACE TABLE ‚Äî simplified for mobile */
    .race-table { margin-top: 24px; }
    .race-table thead { display: none; }
    .race-table th:nth-child(3),
    .race-table td:nth-child(3) { display: none; }
    .race-table th:nth-child(4),
    .race-table td:nth-child(4) { display: none; }
    .race-row { display: flex; flex-direction: column; padding: 16px 0; gap: 6px; border-bottom: 1px solid var(--border); }
    .race-row td { padding: 0 !important; display: block; }
    .race-date { font-size: 0.85rem; min-width: unset; padding-right: 0 !important; }
    .race-name { font-size: 0.95rem; }
    .race-location { font-size: 0.75rem; }
    .race-links { justify-content: flex-start; margin-top: 4px; }
    .race-link { font-size: 0.62rem; padding: 4px 8px; }

    /* INSTAGRAM */
    .ig-embed-wrap { max-width: 100%; }

    /* FOOTER */
    footer { padding: 36px 16px; flex-direction: column; align-items: flex-start; gap: 16px; }
    .footer-social { flex-wrap: wrap; gap: 14px; }
    .footer-logo { font-size: 1.3rem; }
    .footer-copy { font-size: 0.72rem; }
  }

  /* ‚îÄ‚îÄ‚îÄ VERY SMALL (max 380px) ‚îÄ‚îÄ‚îÄ */
  @media (max-width: 380px) {
    .nav-links li:nth-child(n+4) { display: none; }
    .countdown-number { font-size: clamp(2.8rem, 18vw, 4rem); }
    .countdown-sep { font-size: clamp(2.8rem, 18vw, 4rem); }
  }

  /* ‚îÄ‚îÄ‚îÄ SCROLL ANIMATIONS ‚îÄ‚îÄ‚îÄ */
  .reveal {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }

  .reveal.visible {
    opacity: 1;
    transform: none;
  }

  .reveal-delay-1 { transition-delay: 0.1s; }
  .reveal-delay-2 { transition-delay: 0.2s; }
  .reveal-delay-3 { transition-delay: 0.3s; }

  /* ‚îÄ‚îÄ‚îÄ INSTAGRAM ‚îÄ‚îÄ‚îÄ */
  #instagram {
    background: var(--bg);
  }

  .instagram-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 64px;
    align-items: center;
  }

  .instagram-left {}

  .instagram-handle {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    text-decoration: none;
    transition: opacity 0.2s;
  }

  .instagram-handle:hover { opacity: 0.75; }

  .ig-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    flex-shrink: 0;
  }

  .ig-handle-text { display: flex; flex-direction: column; }

  .ig-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    font-size: 1rem;
    letter-spacing: 0.05em;
    color: var(--white);
  }

  .ig-username {
    font-family: 'DM Mono', 'Barlow Condensed', monospace;
    font-size: 0.75rem;
    color: var(--muted);
    letter-spacing: 0.05em;
  }

  .instagram-desc {
    font-size: 0.95rem;
    color: #aac4cc;
    line-height: 1.75;
    margin-bottom: 28px;
    max-width: 400px;
  }

  .ig-follow-btn {
    display: inline-flex;
    align-items: center;
    gap: 9px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.82rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    text-decoration: none;
    padding: 13px 28px;
    background: linear-gradient(135deg, #f09433 0%, #dc2743 50%, #bc1888 100%);
    color: #fff;
    border: none;
    cursor: pointer;
    transition: all 0.25s;
    clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));
  }

  .ig-follow-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(220,39,67,0.35);
  }

  .instagram-right {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .ig-embed-wrap {
    width: 100%;
    max-width: 400px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }

  .ig-embed-wrap::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(to right, #f09433, #dc2743, #bc1888);
    z-index: 1;
  }

  /* Instagram embed iframe override */
  .ig-embed-wrap iframe {
    display: block;
    width: 100% !important;
    min-width: unset !important;
    border: none;
  }

  /* ‚îÄ‚îÄ‚îÄ LANGUAGE TOGGLE ‚îÄ‚îÄ‚îÄ */
  .lang-toggle {
    display: flex;
    align-items: center;
    gap: 10px;
    user-select: none;
  }

  .lang-flag {
    font-size: 1.15rem;
    line-height: 1;
    transition: opacity 0.2s;
  }

  .lang-flag.dim { opacity: 0.35; }

  .toggle-track {
    position: relative;
    width: 48px;
    height: 26px;
    background: var(--border);
    border-radius: 13px;
    border: 1px solid #2a3a44;
    cursor: pointer;
    transition: background 0.3s;
    flex-shrink: 0;
  }

  .toggle-track:hover { border-color: var(--blue-dim); }

  .toggle-thumb {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--blue);
    box-shadow: 0 0 8px rgba(91,200,245,0.5);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .lang-fr .toggle-thumb { transform: translateX(22px); }
  .lang-fr .toggle-track { background: #1a2a1a; border-color: #2a4a2a; }
  .lang-fr .toggle-thumb { background: #5bc875; box-shadow: 0 0 8px rgba(91,200,117,0.5); }

  /* text transitions */
  [data-en][data-fr] {
    transition: opacity 0.15s ease;
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-top">
    <a href="#" class="nav-logo">Run Avec le Smile</a>
    <div class="lang-toggle" onclick="toggleLang()" title="Toggle language">
      <span class="lang-flag" id="flag-us">üá∫üá∏</span>
      <div class="toggle-track" id="toggle-track">
        <div class="toggle-thumb"></div>
      </div>
      <span class="lang-flag dim" id="flag-fr">üá´üá∑</span>
    </div>
  </div>
  <div class="nav-bottom">
    <ul class="nav-links">
      <li><a href="#countdown" data-en="Countdown" data-fr="Compte √† Rebours">Countdown</a></li>
      <li><a href="#mileage" data-en="Training" data-fr="Entra√Ænement">Training</a></li>
      <li><a href="#races" data-en="Races" data-fr="Courses">Races</a></li>
      <li><a href="#instagram" data-en="Instagram" data-fr="Instagram">Instagram</a></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-decoration" id="hero-decoration">
    <img src="hero.jpg" alt="Emmanuel Leblond running at NCAA XC Nationals">
  </div>
  <div class="hero-content">
    <div class="hero-eyebrow">
      <div class="line"></div>
      <span data-en="The Road to Belgrade" data-fr="La Route vers Belgrade">The Road to Belgrade</span>
    </div>
    <h1 class="hero-account">
      Run Avec<br><span class="accent">le Smile</span>
    </h1>
    <div class="hero-name">Emmanuel Leblond</div>
    <p class="hero-tagline" data-en="Chasing big goals with an even bigger smile. French National Team üîú" data-fr="Poursuivre de grands buts avec un grand sourire ! Direction √âquipe de France de Cross.">
      Chasing big goals with an even bigger smile. French National Team üîú
    </p>
    <div class="hero-cta">
      <a href="#mileage" class="btn-primary" data-en="See My Training" data-fr="Voir Mon Entra√Ænement">See My Training</a>
      <a href="#races" class="btn-ghost" data-en="Race Schedule" data-fr="Calendrier des Courses">Race Schedule</a>
    </div>
  </div>
  <div class="hero-scroll">
    <div class="scroll-line"></div>
    <span data-en="Scroll" data-fr="D√©filer">Scroll</span>
  </div>
</section>

<div class="divider"></div>

<!-- COUNTDOWN -->
<section id="countdown">
  <div class="countdown-wrapper reveal">
    <div class="section-label" style="justify-content:center;">
      <div class="line"></div>
      <span data-en="Time Remaining" data-fr="Temps Restant">Time Remaining</span>
      <div class="line"></div>
    </div>
    <h2 class="section-title" data-en="The Qualifying Race" data-fr="La Course de S√©lection">The Qualifying Race</h2>
    <p class="section-sub" style="margin: 0 auto 8px; text-align:center;" data-en="Every training run, every early morning, every hard interval ‚Äî it all builds to this." data-fr="Chaque sortie, chaque matin difficile, chaque interval ‚Äî tout m√®ne √† ce moment.">Every training run, every early morning, every hard interval ‚Äî it all builds to this.</p>

    <div class="countdown-race-name">
      üèÅ Le Cross de S√©lection
    </div>

    <div class="countdown-grid">
      <div class="countdown-unit">
        <div class="countdown-number" id="cd-days">000</div>
        <div class="countdown-label" data-en="Days" data-fr="Jours">Days</div>
      </div>
      <div class="countdown-sep">:</div>
      <div class="countdown-unit">
        <div class="countdown-number" id="cd-hours">00</div>
        <div class="countdown-label" data-en="Hours" data-fr="Heures">Hours</div>
      </div>
      <div class="countdown-sep">:</div>
      <div class="countdown-unit">
        <div class="countdown-number" id="cd-mins">00</div>
        <div class="countdown-label" data-en="Minutes" data-fr="Minutes">Minutes</div>
      </div>
      <div class="countdown-sep">:</div>
      <div class="countdown-unit">
        <div class="countdown-number" id="cd-secs">00</div>
        <div class="countdown-label" data-en="Seconds" data-fr="Secondes">Seconds</div>
      </div>
    </div>

    <div class="countdown-date-line">
      <strong>22 Novembre 2026</strong> ‚Äî Allones, France
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- MILEAGE -->
<section id="mileage">
  <div class="section-label reveal">
    <div class="line"></div>
    <span data-en="Training Load" data-fr="Charge d'Entra√Ænement">Training Load</span>
  </div>
  <div class="mileage-layout">
    <div class="reveal">
      <h2 class="section-title" data-en="Monthly<br>Mileage" data-fr="Kilom√©trage<br>Mensuel">Monthly<br>Mileage</h2>
      <p class="section-sub" data-en="Training data synced from Strava. Displayed in miles for English, kilometers for French ‚Äî connect once and it updates automatically after every run." data-fr="Donn√©es synchronis√©es depuis Strava. Affich√©es en kilom√®tres ‚Äî connectez une fois et √ßa se met √† jour automatiquement apr√®s chaque sortie.">Training data synced from Strava. Displayed in miles for English, kilometers for French ‚Äî connect once and it updates automatically after every run.</p>

      <a class="strava-connect-btn" id="strava-btn" href="https://www.strava.com/oauth/authorize?client_id=206136&redirect_uri=https://run-avec-le-smile.vercel.app&response_type=code&scope=activity:read_all&approval_prompt=auto">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"/></svg>
        <span data-en="Connect with Strava" data-fr="Connecter avec Strava">Connect with Strava</span>
      </a>

      <div class="strava-status" id="strava-status">
        <div class="strava-dot" id="strava-dot"></div>
        <span class="strava-status-text" id="strava-status-text" data-en="Not connected ‚Äî data shown is a placeholder" data-fr="Non connect√© ‚Äî donn√©es affich√©es √† titre indicatif">Not connected ‚Äî data shown is a placeholder</span>
      </div>
    </div>
    <div class="reveal reveal-delay-1">
      <!-- Monthly card -->
      <div class="mileage-card" style="margin-bottom:20px;">
        <div class="mileage-sub-label" data-en="This Month ‚Äî February 2026" data-fr="Ce Mois ‚Äî F√©vrier 2026">This Month ‚Äî February 2026</div>
        <div class="mileage-big" id="monthly-km">‚Äî <span id="monthly-unit">mi</span></div>
        <div class="mileage-bar-wrap">
          <div class="mileage-bar-label">
            <span data-en="Monthly target" data-fr="Objectif mensuel">Monthly target</span>
            <span id="monthly-pct">‚Äî</span>
          </div>
          <div class="bar-track">
            <div class="bar-fill" id="monthly-bar" style="width:0%"></div>
          </div>
        </div>
      </div>

      <!-- Weekly breakdown -->
      <div class="mileage-card">
        <div class="mileage-sub-label" style="margin-bottom:16px;" data-en="This Week ‚Äî Daily Breakdown" data-fr="Cette Semaine ‚Äî D√©tail Journalier">This Week ‚Äî Daily Breakdown</div>
        <div class="weekly-grid" id="weekly-grid">
          <!-- filled by JS -->
        </div>
      </div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- RACES -->
<section id="races">
  <div class="section-label reveal">
    <div class="line"></div>
    <span data-en="Competition Calendar" data-fr="Calendrier des Comp√©titions">Competition Calendar</span>
  </div>
  <div class="reveal">
    <h2 class="section-title" data-en="Upcoming Races" data-fr="Prochaines Courses">Upcoming Races</h2>
    <p class="section-sub" data-en="The full race schedule, from NCAA to the French National XC team." data-fr="Le calendrier complet, des championnats NCAA √† l'√©quipe de France de cross.">The full race schedule, from NCAA to the French National XC team.</p>
  </div>

  <table class="race-table reveal reveal-delay-1">
    <thead>
      <tr>
        <th data-en="Date" data-fr="Date">Date</th>
        <th data-en="Race" data-fr="Course">Race</th>
        <th data-en="Type" data-fr="Type">Type</th>
        <th style="text-align:right;" data-en="Links" data-fr="Liens">Links</th>
      </tr>
    </thead>
    <tbody id="race-tbody">
      <tr class="race-row">
        <td class="race-date">Feb 28</td>
        <td>
          <div class="race-name">Centennial Conference Indoor Meet</div>
          <div class="race-location">Lancaster, PA ‚Äî DMR</div>
        </td>
        <td><span class="race-type type-track">Track</span></td>
        <td class="race-links">
          <a href="#" class="race-link">üìç Info</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row">
        <td class="race-date">Mar 13‚Äì14</td>
        <td>
          <div class="race-name">NCAA Indoor National Championships</div>
          <div class="race-location">Birmingham, AL ‚Äî 5k / 3k Double</div>
        </td>
        <td><span class="race-type type-track">Track</span></td>
        <td class="race-links">
          <a href="#" class="race-link highlight">üì∫ Watch Live</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row">
        <td class="race-date">Mar 27</td>
        <td>
          <div class="race-name">Raleigh Relays</div>
          <div class="race-location">Raleigh, NC ‚Äî 10k</div>
        </td>
        <td><span class="race-type type-track">Track</span></td>
        <td class="race-links">
          <a href="#" class="race-link">üìç Info</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row">
        <td class="race-date">May 1‚Äì3</td>
        <td>
          <div class="race-name">Centennial Conference Championships</div>
          <div class="race-location">Gettysburg, PA</div>
        </td>
        <td><span class="race-type type-track">Track</span></td>
        <td class="race-links">
          <a href="#" class="race-link">üìç Info</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row">
        <td class="race-date">May 21‚Äì23</td>
        <td>
          <div class="race-name">NCAA Outdoor National Championships</div>
          <div class="race-location">La Crosse, WI</div>
        </td>
        <td><span class="race-type type-track">Track</span></td>
        <td class="race-links">
          <a href="#" class="race-link highlight">üì∫ Watch Live</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row">
        <td class="race-date">Apr 18</td>
        <td>
          <div class="race-name">Wake Forest Invitational</div>
          <div class="race-location">Winston-Salem, NC ‚Äî 5k</div>
        </td>
        <td><span class="race-type type-track">Track</span></td>
        <td class="race-links">
          <a href="#" class="race-link">üìç Info</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row" style="border-color: rgba(91,200,245,0.3);">
        <td class="race-date" style="color: var(--blue);">Nov 22</td>
        <td>
          <div class="race-name" style="color: var(--blue);">Le Cross de S√©lection ‚≠ê</div>
          <div class="race-location">Allones, France ‚Äî French National Team Qualifier</div>
        </td>
        <td><span class="race-type type-xc">XC Qualifier</span></td>
        <td class="race-links">
          <a href="#" class="race-link highlight">üì∫ Watch Live</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
      <tr class="race-row" style="border-color: rgba(91,200,245,0.5);">
        <td class="race-date" style="color: var(--blue);">Dec 13</td>
        <td>
          <div class="race-name" style="color: var(--blue);">European U23 Cross Country Championships üèÜ</div>
          <div class="race-location">Belgrade, Serbia</div>
        </td>
        <td><span class="race-type type-xc">XC Euro U23</span></td>
        <td class="race-links">
          <a href="#" class="race-link highlight">üì∫ Watch Live</a>
          <a href="#" class="race-link">üî¥ Live Results</a>
        </td>
      </tr>
    </tbody>
  </table>
</section>

<div class="divider"></div>

<!-- INSTAGRAM -->
<section id="instagram">
  <div class="section-label reveal">
    <div class="line"></div>
    <span data-en="Follow the Journey" data-fr="Suivre l'Aventure">Follow the Journey</span>
  </div>
  <div class="instagram-layout">
    <div class="instagram-left reveal">
      <a class="instagram-handle" href="https://www.instagram.com/runaveclesmile/" target="_blank" rel="noopener">
        <div class="ig-avatar">üèÉ</div>
        <div class="ig-handle-text">
          <span class="ig-name">Run Avec le Smile</span>
          <span class="ig-username">@runaveclesmile</span>
        </div>
      </a>
      <h2 class="section-title" data-en="On Instagram" data-fr="Sur Instagram">On Instagram</h2>
      <p class="instagram-desc" data-en="Behind-the-scenes training, race day updates, and the full story of chasing a spot on the French National Cross Country Team. Follow along for the journey." data-fr="Entra√Ænements en coulisses, comptes-rendus de courses, et l'histoire compl√®te de la qu√™te d'une s√©lection en √©quipe de France de cross. Suivez l'aventure.">
        Behind-the-scenes training, race day updates, and the full story of chasing a spot on the French National Cross Country Team. Follow along for the journey.
      </p>
      <a class="ig-follow-btn" href="https://www.instagram.com/runaveclesmile/" target="_blank" rel="noopener">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="4"/><circle cx="17.5" cy="6.5" r="1.2" fill="currentColor" stroke="none"/></svg>
        <span data-en="Follow @runaveclesmile" data-fr="Suivre @runaveclesmile">Follow @runaveclesmile</span>
      </a>
    </div>

    <div class="instagram-right reveal reveal-delay-1">
      <div class="ig-embed-wrap">
        <blockquote
          class="instagram-media"
          data-instgrm-permalink="https://www.instagram.com/p/DTTB3MICkE7/"
          data-instgrm-version="14"
          style="background:#fff; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin:0; max-width:400px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
        </blockquote>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-logo">Run Avec le Smile</div>
  <div class="footer-social">
    <a href="https://www.instagram.com/runaveclesmile/" target="_blank" rel="noopener">Instagram</a>
    <a href="https://strava.com" target="_blank" rel="noopener">Strava</a>
    <a href="mailto:runonthego1@gmail.com?subject=Sponsorship%20Inquiry%20%E2%80%94%20Run%20Avec%20le%20Smile" class="footer-sponsor-btn" data-en="Sponsorship Inquiries" data-fr="Partenariats">Sponsorship Inquiries</a>
  </div>
  <div class="footer-copy">¬© 2026 Emmanuel Leblond</div>
</footer>

<script>
  let isFrench = false;

  function toggleLang() {
    isFrench = !isFrench;
    const track = document.getElementById('toggle-track');
    const flagUs = document.getElementById('flag-us');
    const flagFr = document.getElementById('flag-fr');

    if (isFrench) {
      track.classList.add('lang-fr');
      flagUs.classList.add('dim');
      flagFr.classList.remove('dim');
    } else {
      track.classList.remove('lang-fr');
      flagUs.classList.remove('dim');
      flagFr.classList.add('dim');
    }

    // swap all translatable elements
    document.querySelectorAll('[data-en][data-fr]').forEach(el => {
      el.style.opacity = '0';
      setTimeout(() => {
        el.innerHTML = isFrench ? el.dataset.fr : el.dataset.en;
        el.style.opacity = '1';
      }, 120);
    });

    // re-render mileage in the new unit if data is loaded
    if (_storedKm !== null && _storedWeeklyKm !== null) {
      setTimeout(() => renderMileage(_storedKm, _storedWeeklyKm), 150);
    }
  }

  // ‚îÄ‚îÄ‚îÄ COUNTDOWN ‚îÄ‚îÄ‚îÄ
  const raceDate = new Date('2026-11-22T09:00:00');

  function updateCountdown() {
    const now  = new Date();
    const diff = raceDate - now;
    if (diff <= 0) {
      document.getElementById('cd-days').textContent  = '000';
      document.getElementById('cd-hours').textContent = '00';
      document.getElementById('cd-mins').textContent  = '00';
      document.getElementById('cd-secs').textContent  = '00';
      return;
    }
    const days  = Math.floor(diff / 86400000);
    const hours = Math.floor((diff % 86400000) / 3600000);
    const mins  = Math.floor((diff % 3600000)  / 60000);
    const secs  = Math.floor((diff % 60000)    / 1000);

    const set = (id, val, pad) => {
      const el = document.getElementById(id);
      const newVal = String(val).padStart(pad, '0');
      if (el.textContent !== newVal) {
        el.textContent = newVal;
        el.classList.add('updated');
        setTimeout(() => el.classList.remove('updated'), 300);
      }
    };
    set('cd-days',  days,  3);
    set('cd-hours', hours, 2);
    set('cd-mins',  mins,  2);
    set('cd-secs',  secs,  2);
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);

  // ‚îÄ‚îÄ‚îÄ STRAVA INTEGRATION ‚îÄ‚îÄ‚îÄ
  const MONTHLY_TARGET_MI = 125; // miles ‚Äî your monthly goal in miles (~200km)
  const MONTHLY_TARGET_KM = 200; // km  ‚Äî your monthly goal in km

  // Returns current unit based on language toggle
  function getUnit() { return isFrench ? 'km' : 'mi'; }

  // Convert stored km value to display value
  function toDisplay(km) {
    return isFrench
      ? Math.round(km * 10) / 10
      : Math.round(km * 0.621371 * 10) / 10;
  }

  function getTarget() {
    return isFrench ? MONTHLY_TARGET_KM : MONTHLY_TARGET_MI;
  }

  function setStravaConnected(name) {
    // Hide the connect button, status line, and description ‚Äî users don't need to see this
    const btn = document.getElementById('strava-btn');
    if (btn) btn.style.display = 'none';
    const status = document.getElementById('strava-status');
    if (status) status.style.display = 'none';
    const desc = document.querySelector('#mileage .section-sub');
    if (desc) desc.style.display = 'none';
  }

  // Store raw km values globally so we can re-render on language toggle
  let _storedKm = null;
  let _storedWeeklyKm = null;

  function renderMileage(totalKm, weeklyDays) {
    _storedKm = totalKm;
    _storedWeeklyKm = weeklyDays;

    const target  = getTarget();
    const unit    = getUnit();

    // weeklyDays is an array of arrays: [[run1km, run2km], [], [run1km], ...]
    const normalize = d => Array.isArray(d) ? d : (d > 0 ? [d] : []);
    const days7 = weeklyDays.map(normalize);

    const todayIdx = (new Date().getDay() + 6) % 7; // 0=Mon ... 6=Sun

    // Blank out future days
    const days7Masked = days7.map((runs, i) => i > todayIdx ? [] : runs);

    // Total display value per day
    const dayTotalsKm = days7Masked.map(runs => runs.reduce((s, k) => s + k, 0));
    const displayTotals = dayTotalsKm.map(k => toDisplay(k));
    const totalDisplay = toDisplay(totalKm);
    const pct = Math.min(Math.round((totalDisplay / target) * 100), 100);

    // Monthly card
    const kmEl = document.getElementById('monthly-km');
    if (kmEl) kmEl.innerHTML = `${totalDisplay} <span id="monthly-unit">${unit}</span>`;
    const pctEl = document.getElementById('monthly-pct');
    if (pctEl) pctEl.textContent = pct + '%';
    setTimeout(() => {
      const bar = document.getElementById('monthly-bar');
      if (bar) bar.style.width = pct + '%';
    }, 200);

    // Weekly bars
    const grid = document.getElementById('weekly-grid');
    if (!grid) return;
    grid.innerHTML = '';
    const dayLabels = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];

    // Max across days that have data (for scaling)
    const maxVal = Math.max(...displayTotals.filter((_, i) => i <= todayIdx), 0.1);

    days7Masked.forEach((runs, i) => {
      const isToday   = i === todayIdx;
      const isFuture  = i > todayIdx;
      const total     = displayTotals[i];
      const runDisplays = runs.map(k => toDisplay(k));
      const hasRuns   = runDisplays.length > 0 && total > 0;

      // Tooltip
      let tooltipHtml = '';
      if (isFuture) {
        tooltipHtml = `<span style="color:var(--muted);font-size:0.7rem">Upcoming</span>`;
      } else if (!hasRuns) {
        tooltipHtml = `<span style="color:var(--muted);font-size:0.7rem">Rest day</span>`;
      } else {
        runDisplays.forEach((d, ri) => {
          tooltipHtml += `<span class="tt-run">Run ${ri + 1}: ${d} ${unit}</span>`;
        });
        if (runDisplays.length > 1) {
          tooltipHtml += `<span class="tt-total">Total: ${total} ${unit}</span>`;
        }
      }

      // Stacked bar segments
      let stackHtml = '';
      if (hasRuns && !isFuture) {
        const totalHeight = Math.max((total / maxVal) * 100, 8); // min 8% so tiny runs show
        runDisplays.forEach((d, ri) => {
          const segH = (d / total) * totalHeight;
          const cls  = `week-fill${isToday ? ' current' : ''}${ri > 0 ? ' run2' : ''}`;
          stackHtml += `<div class="${cls}" style="height:${segH}%"></div>`;
        });
      }

      grid.innerHTML += `
        <div class="week-bar${isFuture ? ' future' : ''}">
          <div class="week-fill-wrap">
            <div class="week-stack">${stackHtml}</div>
            <div class="week-tooltip">${tooltipHtml}</div>
          </div>
          <div class="week-day-label${isToday ? ' today' : ''}">${dayLabels[i]}</div>
        </div>`;
    });
  }

  async function fetchStravaStats(refresh_token) {
    try {
      const res = await fetch(`/api/strava?action=stats&refresh_token=${encodeURIComponent(refresh_token)}`);
      const data = await res.json();
      if (data.totalKm !== undefined) {
        localStorage.setItem('strava_refresh_token', data.refresh_token);
        renderMileage(data.totalKm, data.weeklyDays);
        return true;
      }
    } catch(e) { console.error('Strava fetch error', e); }
    return false;
  }

  async function handleStravaCallback(code) {
    try {
      const res = await fetch(`/api/strava?action=exchange&code=${encodeURIComponent(code)}`);
      const data = await res.json();
      if (data.refresh_token) {
        localStorage.setItem('strava_refresh_token', data.refresh_token);
        localStorage.setItem('strava_athlete', data.athlete?.firstname || '');
        window.history.replaceState({}, document.title, '/');
        setStravaConnected(data.athlete?.firstname);
        await fetchStravaStats(data.refresh_token);
        return true;
      }
    } catch(e) { console.error('Strava exchange error', e); }
    return false;
  }

  async function initStrava() {
    const params = new URLSearchParams(window.location.search);
    const code = params.get('code');
    if (code) { await handleStravaCallback(code); return; }

    const saved = localStorage.getItem('strava_refresh_token');
    const name  = localStorage.getItem('strava_athlete');
    if (saved) {
      setStravaConnected(name);
      await fetchStravaStats(saved);
      return;
    }

    // Not connected ‚Äî show placeholder in correct units
    // Each day is an array of runs (supports doubles)
    renderMileage(228.5, [
      [12.1, 8.0],  // Mon ‚Äî double
      [],           // Tue ‚Äî rest
      [16.0],       // Wed
      [10.2],       // Thu
      [14.1, 7.2],  // Fri ‚Äî double
      [22.0],       // Sat ‚Äî long run
      []            // Sun ‚Äî rest
    ]);
  }

  document.addEventListener('DOMContentLoaded', () => initStrava());

  // ‚îÄ‚îÄ‚îÄ SCROLL REVEAL ‚îÄ‚îÄ‚îÄ
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add('visible');
      }
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
  observer.observe(document.getElementById('mileage'));

  // ‚îÄ‚îÄ‚îÄ TOUCH TOOLTIPS for weekly bars (mobile) ‚îÄ‚îÄ‚îÄ
  document.addEventListener('click', e => {
    const bar = e.target.closest('.week-bar');
    // Dismiss all first
    document.querySelectorAll('.week-bar.tapped').forEach(b => {
      if (b !== bar) b.classList.remove('tapped');
    });
    if (bar) bar.classList.toggle('tapped');
  });
</script>

<!-- Instagram embed loader -->
<script async src="//www.instagram.com/embed.js"></script>
</body>
</html>
